<%= turbo_frame_tag "main_content", data: { turbo_action: "advance", controller: "callback-form" } do %>
<!-- Collaborative Callback Dashboard -->
<main class="main-content">
  <%= turbo_stream_from "callbacks" %>
  
  <!-- Dashboard Header -->
  <header class="main-header">
    <div class="header-left">
      <h1>Collaborative Dashboard</h1>
      <div class="breadcrumb">CRM › Callbacks › Team Dashboard</div>
    </div>
    <div class="header-actions">
      <!-- Notifications -->
      <%= render 'shared/notifications' %>
      
      <!-- View Toggle -->
      <div class="cb-view-toggle">
        <%= link_to callbacks_path, class: "cb-toggle-btn", data: { turbo_frame: "main_content" } do %>
          <i class="fas fa-table"></i>
          Table
        <% end %>
        <%= link_to dashboard_callbacks_path, class: "cb-toggle-btn cb-toggle-active", data: { turbo_frame: "main_content" } do %>
          <i class="fas fa-th-large"></i>
          Dashboard
        <% end %>
      </div>
      
      <%= link_to new_callback_path, class: "btn btn-primary", data: { turbo_frame: "main_content" } do %>
        <i class="fas fa-plus"></i>
        Add Callback
      <% end %>
    </div>
  </header>

  <!-- Dashboard Filters -->
  <div class="cb-dashboard-filters">
    <div class="cb-filter-group">
      <button class="cb-filter-btn cb-filter-active" data-status="all" data-action="click->callback-form#filterByStatus">All</button>
      <button class="cb-filter-btn" data-status="pending" data-action="click->callback-form#filterByStatus">Pending</button>
      <button class="cb-filter-btn" data-status="not_interested" data-action="click->callback-form#filterByStatus">Not Interested</button>
      <button class="cb-filter-btn" data-status="already_purchased" data-action="click->callback-form#filterByStatus">Already Purchased</button>
      <button class="cb-filter-btn" data-status="sale" data-action="click->callback-form#filterByStatus">Sale</button>
      <button class="cb-filter-btn" data-status="payment_link" data-action="click->callback-form#filterByStatus">Payment Link</button>
      <button class="cb-filter-btn" data-status="follow_up" data-action="click->callback-form#filterByStatus">Follow Up</button>
    </div>
    
    <div class="cb-search-container">
      <i class="fas fa-search"></i>
      <input type="text" class="cb-search-input" placeholder="Search callbacks..." data-action="input->callback-form#searchCallbacks">
    </div>
  </div>

  <!-- Dashboard Grid -->
  <div class="cb-dashboard-container">
    <div class="cb-dashboard-grid" id="callback-cards">
      <% @callbacks.each do |callback| %>
        <%= render 'dashboard_card', callback: callback %>
      <% end %>
    </div>
    
    <% if @callbacks.empty? %>
      <div class="cb-empty-state">
        <i class="fas fa-phone-slash"></i>
        <h3>No callbacks found</h3>
        <p>Create your first callback to start collaborating with your team.</p>
        <%= link_to new_callback_path, class: "btn btn-primary", data: { turbo_frame: "main_content" } do %>
          <i class="fas fa-plus"></i>
          Add First Callback
        <% end %>
      </div>
    <% end %>
  </div>
</main>
<% end %>
/* 
 * AutoXpress CRM Card Components
 * ===================================
 * 
 * This file contains all card component styles used throughout the AutoXpress CRM.
 * This provides a unified card system that replaces scattered card definitions
 * across multiple files while maintaining different visual styles for different contexts.
 * 
 * Card Types:
 * - Base cards (.ax-card)
 * - Elevated cards (.ax-card--elevated)
 * - Context cards (.ax-card--order, .ax-card--customer, etc.)
 * - Interactive cards (.ax-card--clickable)
 * 
 * Usage: <div class="ax-card ax-card--order">...</div>
 */

/* === BASE CARD === */
.ax-card {
  background: var(--color-surface);
  border-radius: var(--radius-card);
  box-shadow: var(--shadow-sm);
  border: var(--card-border-width) solid var(--card-border-color);
  transition: all var(--duration-normal) var(--ease-in-out);
  overflow: hidden;
  position: relative;
  
  &:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
    border-color: var(--color-gray-300);
  }
}

/* === CARD ELEMENTS === */
.ax-card__header {
  padding: var(--space-lg) var(--space-lg) var(--space-md);
  border-bottom: 1px solid var(--color-border-light);
  
  &--with-actions {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-md);
  }
  
  &--centered {
    text-align: center;
  }
}

.ax-card__title {
  margin: 0;
  font-size: var(--text-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

.ax-card__subtitle {
  margin: var(--space-xs) 0 0 0;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-normal);
}

.ax-card__body {
  padding: var(--space-md) var(--space-lg);
  
  &--padded {
    padding: var(--space-lg);
  }
  
  &--compact {
    padding: var(--space-sm) var(--space-md);
  }
}

.ax-card__footer {
  padding: var(--space-md) var(--space-lg) var(--space-lg);
  border-top: 1px solid var(--color-border-light);
  background: var(--color-gray-50);
  
  &--actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
  }
  
  &--centered {
    justify-content: center;
  }
}

/* === CARD MODIFIERS === */

/* Elevated cards with stronger shadows */
.ax-card--elevated {
  box-shadow: var(--shadow-lg);
  
  &:hover {
    box-shadow: var(--shadow-xl);
    transform: translateY(-4px);
  }
}

/* Clickable cards with hover effects */
.ax-card--clickable {
  cursor: pointer;
  
  &:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-3px);
    border-color: var(--color-brand-red-200);
  }
  
  &:active {
    transform: translateY(-1px);
  }
}

/* Flat cards without shadows */
.ax-card--flat {
  box-shadow: none;
  border: 1px solid var(--color-border);
  
  &:hover {
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
  }
}

/* === CONTEXT CARDS === */
/* Cards with colored accents for different contexts */

.ax-card--order {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-brand-red) 0%, var(--color-brand-red-dark) 100%);
  }
  
  &.ax-card--needs-attention {
    border-color: var(--color-warning);
    
    &::before {
      background: linear-gradient(90deg, var(--color-warning) 0%, var(--color-warning-600) 100%);
    }
  }
  
  &.ax-card--urgent {
    animation: ax-pulse-danger 2s infinite;
    
    &::before {
      background: linear-gradient(90deg, var(--color-danger) 0%, var(--color-brand-red-dark) 100%);
    }
  }
}

.ax-card--customer {
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-info) 0%, var(--color-info-600) 100%);
  }
}

.ax-card--refund {
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-success) 0%, var(--color-success-600) 100%);
  }
}

.ax-card--dispatch {
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%);
  }
}

.ax-card--product {
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
  }
}

/* === CARD STATES === */
.ax-card--loading {
  position: relative;
  overflow: hidden;
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    animation: ax-shimmer 1.5s infinite;
  }
}

@keyframes ax-shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

.ax-card--disabled {
  opacity: 0.6;
  pointer-events: none;
  
  &:hover {
    transform: none;
    box-shadow: var(--shadow-sm);
    border-color: var(--card-border-color);
  }
}

.ax-card--error {
  border-color: var(--color-danger);
  background: var(--color-brand-red-50);
  
  &::before {
    background: var(--color-danger);
  }
}

.ax-card--success {
  border-color: var(--color-success);
  background: var(--color-success-50);
  
  &::before {
    background: var(--color-success);
  }
}

/* === CARD LAYOUTS === */

/* Grid layout for card content */
.ax-card__grid {
  display: grid;
  gap: var(--space-md);
  
  &--2-col {
    grid-template-columns: repeat(2, 1fr);
  }
  
  &--3-col {
    grid-template-columns: repeat(3, 1fr);
  }
  
  &--auto {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
}

/* Flex layout for card content */
.ax-card__flex {
  display: flex;
  gap: var(--space-md);
  
  &--column {
    flex-direction: column;
  }
  
  &--space-between {
    justify-content: space-between;
  }
  
  &--center {
    align-items: center;
    justify-content: center;
  }
}

/* === CARD GROUPS === */
.ax-card-group {
  display: grid;
  gap: var(--space-lg);
  
  &--2-col {
    grid-template-columns: repeat(2, 1fr);
  }
  
  &--3-col {
    grid-template-columns: repeat(3, 1fr);
  }
  
  &--4-col {
    grid-template-columns: repeat(4, 1fr);
  }
  
  &--auto {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
  
  &--compact {
    gap: var(--space-md);
  }
}

/* === MODERN CARD VARIANTS === */
/* Based on existing refunds modern cards */

.ax-card--modern {
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border: 1px solid rgba(226, 232, 240, 0.8);
  box-shadow: 
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
  
  &:hover {
    background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
    box-shadow: 
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
  }
}

.ax-card--glass {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  
  &:hover {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
  }
}

/* === RESPONSIVE BEHAVIOR === */
@media (max-width: 1024px) {
  .ax-card-group {
    &--4-col {
      grid-template-columns: repeat(2, 1fr);
    }
    
    &--3-col {
      grid-template-columns: repeat(2, 1fr);
    }
  }
}

@media (max-width: 768px) {
  .ax-card {
    &:hover {
      transform: none;
    }
  }
  
  .ax-card__header {
    padding: var(--space-md);
    
    &--with-actions {
      flex-direction: column;
      align-items: stretch;
      gap: var(--space-sm);
    }
  }
  
  .ax-card__body {
    padding: var(--space-sm) var(--space-md);
  }
  
  .ax-card__footer {
    padding: var(--space-sm) var(--space-md) var(--space-md);
    
    &--actions {
      flex-direction: column;
      gap: var(--space-sm);
    }
  }
  
  .ax-card-group {
    grid-template-columns: 1fr;
    gap: var(--space-md);
    
    &--compact {
      gap: var(--space-sm);
    }
  }
  
  .ax-card__grid {
    &--2-col,
    &--3-col {
      grid-template-columns: 1fr;
    }
  }
}

/* === ACCESSIBILITY === */
@media (prefers-reduced-motion: reduce) {
  .ax-card,
  .ax-card--clickable,
  .ax-card--elevated {
    transition: none;
    
    &:hover {
      transform: none;
    }
  }
  
  .ax-card--urgent {
    animation: none;
  }
  
  .ax-card--loading::after {
    animation: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .ax-card {
    border-width: 2px;
    border-color: var(--color-text-primary);
  }
  
  .ax-card::before {
    height: 4px;
  }
}

/* === LEGACY COMPATIBILITY === */
/* Map existing card classes to new system */
.refunds-modern-card {
  @extend .ax-card;
  @extend .ax-card--modern;
  @extend .ax-card--refund;
}

.modern-order-card {
  @extend .ax-card;
  @extend .ax-card--modern;
  @extend .ax-card--order;
}

.customer-details-grid {
  @extend .ax-card;
  @extend .ax-card--customer;
}

.resolution-item {
  @extend .ax-card;
  @extend .ax-card--flat;
}